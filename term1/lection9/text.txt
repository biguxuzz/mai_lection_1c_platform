=== Часть 1 ===
{"text":" Так, сегодня у нас будет работа с хранилищем. Зачем нужно хранилище? Хранилище, ну, например, нам нужно будет для того, чтобы передавать какие-то данные между двумя формами. То есть у нас форма, она только на клиенте, поэтому часть сложных каких-то данных, мы просто так между формами не передадим. И второе, ну, например, для для картинок на форме. Давайте начнем, наверное, с передачей. У нас есть документ реализации, например. И в этом документе у нас есть форма.","usage":{"type":"duration","seconds":60}}

=== Часть 2 ===
{"text":" и товар мы тут подбираем по одному а мы хотим допустим как-то группы подобрать товар ну и для этого мы сделаем кнопку подбор так разместим ее давайте просто так что этот будет еще разместим ее над товарами так и собственно сделаем вызов так что у нас она у нас чисто клиентской будет Этот подбор будет в следующем видео.","usage":{"type":"duration","seconds":60}}

=== Часть 3 ===
{"text":" форму подбора в товарах у нас есть форма выбора с остатками чтобы ее не поломать мы сделаем форму подбора с остатками скопируем нашу тут он формочку и назовем ее форма И соответственно здесь нам надо в форме товара нам надо вызвать эту форму. Для того, чтобы ее вызвать, давайте вспомним, что у нас вообще на этой форме творится. Мы при создании устанавливаем скрепление. склад, поэтому нам надо","usage":{"type":"duration","seconds":60}}

=== Часть 4 ===
{"text":" сначала передать туда параметрами склад который у нас который мы который пользователь уже здесь успел выбрать и для этого мы делаем следующее создаем параметры подбора это у нас структура и в параметры подпора вставим склад Спасибо.","usage":{"type":"duration","seconds":60}}

=== Часть 5 ===
{"text":" Так как мы с вами сейчас находимся на форме, то нам нужно выбрать ссылку склада из объекта. Ну и, собственно, теперь нам нужно открыть форму. Добрый день. Продолжение следует...","usage":{"type":"duration","seconds":60}}

=== Часть 6 ===
{"text":" так открыть открыть форму соответственно мы обращаемся к справочнику товары формам и форма подбора состава И нам надо, естественно, передать параметры вызова. Это, собственно, те параметры, которые мы с вами заполнили. И помимо этого, нам надо еще, так как мы планируем в эту форму дальше вернуть каким-то образом, нам надо перейти передать владельцу.","usage":{"type":"duration","seconds":60}}

=== Часть 7 ===
{"text":" формы которые мы создадим ну и соответственно для для нас это будет эта форма то есть мы эту форму из которой мы открываем и и делал владельцем так давайте так чтобы все было уместилось так и на что вызвали теперь в этой форме что нам нужно сделать для того чтобы нам организовать список выбора нам нужно здесь создать так почему я не могу так я сейчас справочник товар и формы Мне нужно создать...","usage":{"type":"duration","seconds":60}}

=== Часть 8 ===
{"text":" Подобранные товары. И это у меня будет. Видимо таблица значений. Теперь нам нужно насоздавать. Ну как бы эту таблицу значений заполнить. У нас здесь точно будет товар. Так, что у нас еще здесь должно быть по логике? Мы подбираем товар и нам нужно будет это все передать. Ну, не, они внутри товара. Зачем нам","usage":{"type":"duration","seconds":60}}

=== Часть 9 ===
{"text":" Смотрите, у нас на этой форме товар, количество, цена, сумма. Наверное, логично и сюда тоже запихнуть все эти поля. Поэтому мы так не реквизит удалить. Колонку товар, количество... Это у нас число 15, да? 153 точнее. Цена. Добрый. Для цены у нас есть определяемый тип. Суммовой. И сумма. Спасибо.","usage":{"type":"duration","seconds":60}}

=== Часть 10 ===
{"text":" Определили. Теперь нам надо это все разместить, естественно, на форме. Так. Разместили. И нам надо у списка... То есть теперь, когда у нас по умолчанию у нас действия какие. Мы когда нажимаем на список, он сразу этот товар передает в ту форму владельца. Нам такое поведение сейчас не нужно, поэтому нам нужно в форме списка вот здесь вот переопределить выбор. Так, мы его наклеим. Тенда определяем.","usage":{"type":"duration","seconds":60}}

=== Часть 11 ===
{"text":" И, собственно, что мы делаем? Нам, во-первых, нужно, чтобы он стандартным образом себя больше не вел, потому что он тогда при выборе закроет форму, нам это не нужно. Поэтому стандартную обработку мы поставим в ложь. И теперь нам надо в наш товар, который подобранный товар, добавить новую строку. Так, ну и там у нас есть товар. Это будет элемент. Почему это будет элемент?","usage":{"type":"duration","seconds":60}}

=== Часть 12 ===
{"text":" что у нас основной реквизит формы списка. Если мы посмотрим на динамический список и откроем настройку списка, то вот здесь основная таблица - это товары, и, соответственно, элемент выбора из этого списка будет как раз товар с ссылками. А вот со всеми остальными полями немножко посложнее будет. Почему будет посложнее? Потому что, ну, во-первых, нет, количество, естественно, давайте просто поставим количество равное единице. А вот цена, она у нас должна взяться из той таблички. Она уже не является элементом. Она у нас где-то в выбранной строке присутствует. кто это.","usage":{"type":"duration","seconds":60}}

=== Часть 13 ===
{"text":" Так, а у нас еще сумма там есть. Сумма. Сумма еще просто. Пусть это будет цена на количество. Так, а с ценой получается это у нас выбранная строка. Текущие данные. И вот здесь у нас должна быть цена. Но не факт, что она там будет. Потому что если мы посмотрим на нашу форму, то у нас здесь цены нет. Поэтому нам нужно сначала из списка вот сюда цену перетащить, чтобы она здесь появилась. Продолжение следует.","usage":{"type":"duration","seconds":60}}

=== Часть 14 ===
{"text":" с текущими данными. То есть выбор мы обработали, то есть теперь у нас создается новая строчка. Теперь нам надо как-то наш подобранное все это, что мы подобрали, каким-то образом передать в другую форму. Как мы это можем осуществить? Это мы можем сделать... с помощью команды. Создадим команду \"Совершить подбор\". Давайте сразу создадим на клиенте процедуру на сервере. Но единственное, мы процедуру на сервере сделаем функцией на сервере. Спасибо.","usage":{"type":"duration","seconds":60}}

=== Часть 15 ===
{"text":" Соответственно, функция нам будет возвращать адрес во временное хранилище. А чтобы поместить во временное хранилище, нам нужно... На самом деле достаточно все просто. нам нужно вот так сделать адрес поместить во временное хранилище данные которые мы хотим поместить это соответственно подобранные товары и мы всю табличку эту поместим туда с помощью выгрузить для того чтобы чтобы у нас...","usage":{"type":"duration","seconds":60}}

=== Часть 16 ===
{"text":" Это не хранил... Ну, то есть, как работает временное хранилище? Временное хранилище, по сути, оно создает файлик в папке cntx. Если это на сервере, то, соответственно, на сервере вашей сессии. И то, что вы поместили во временное хранилище, оно будет... Если вы не укажете уникальный модификатор формы, который будет служить триггером того, что... чтобы вычистить эти данные, то она будет храниться до конца вашей сессии, ну и соответственно нам, чтобы не перегружать хранение на сервере ненужными данными, которые нам уже не понадобятся, поэтому мы при помещении во временное хранилище еще укажем уникальный идентификатор этой формы, потому что по сути она нам нужна только во время жизни этой формы. Почему она намного","usage":{"type":"duration","seconds":60}}

=== Часть 17 ===
{"text":" нужна только во время этой жизни форма, потому что вот здесь мы получили этот адрес и возвратили его. А здесь, соответственно, мы получили этот адрес, теперь нам нужно каким-то образом сделать так, чтобы форма, которая мы вызвали, точнее форма из которой мы вызвали, каким-то образом сработала на этот адрес. Для этого мы сделаем следующее. На форме документа реализации товара мы реализуем... Мы реализуем процедуру... Добрый день. А-а-а...","usage":{"type":"duration","seconds":60}}

=== Часть 18 ===
{"text":" Так, работать. Подбор. Сюда к нам придет адрес. И это будет экспортное Экспортная процедура. Так, она будет у нас на клиенте. Почему она экспортная? Потому что нам нужно ее вызывать из других... из внешних форм. И, собственно, что мы здесь делаем? Здесь мы сделаем ровно обратное. Нам нужно... То есть мы получили... Сюда к нам придет адрес. А нам нужно...","usage":{"type":"duration","seconds":60}}

=== Часть 19 ===
{"text":" сервере теперь обработать это так наш процедуру обработку подборность сервере А здесь мы, соответственно, что сделаем? У нас есть товары. Как он у нас называется? Так, реализация. Так. Ммм...","usage":{"type":"duration","seconds":60}}

=== Часть 20 ===
{"text":" Мы должны в объект наш, в его табличную часть товары загрузить то, что нам пришло из... Из адреса по временному хранилищу. Поэтому мы сделаем так. Получить из временного хранилища. И вот здесь у нас адрес. Теперь Давайте.","usage":{"type":"duration","seconds":60}}

=== Часть 21 ===
{"text":" Проверим, что у меня все кнопки. Так, подбор кнопок здесь есть. Здесь я дальше не... Так. И у нас в контексте на клиенте у нас есть владелец. Владелец формы. И здесь мы обработать подбор. И наш адрес в этот подбор передадим ну и соответственно после этого нам форма после того как мы завершили эти выборы сделали нам больше эта форма не нужна поэтому мы эту форму закроем закрыть ну давайте Посмотрим, что у нас получилось.","usage":{"type":"duration","seconds":60}}

=== Часть 22 ===
{"text":" Продажи, реализация товаров. Так, формально. Ну, соответственно, вот она у нас с остатками, цены. так что не так пущей данные давайте посмотрим что у нас здесь не так так у нас на так выбранная строка так сейчас я все перепутал да да не перепутал нам нужно выбранная строка от какой-то посылка то есть это вот сюда можно","usage":{"type":"duration","seconds":60}}

=== Часть 23 ===
{"text":" определить а вот элемент это как раз у нас поле это у нас табличная форма и вот как раз у него есть текущие данные и здесь есть цена которая вам нужно проверим да вот оно есть так тогда мы перезапишемся даже реализация так как точка останова нам больше не нужна Ну и соответственно","usage":{"type":"duration","seconds":60}}

=== Часть 24 ===
{"text":" теперь замечательно кнопка завершить подбор я так и не разместить он нигде завершить так вот у нас есть кнопка завершить подбор и мы ее в подобранные товары выберем так теперь и сделаем картинку ему стандартную продажи реализации Продолжение следует...","usage":{"type":"duration","seconds":60}}

=== Часть 25 ===
{"text":" Так, ну и завершить подбор. Вот у нас все это появилось в нашем документе. Так. Итого, что мы с вами сегодня здесь научились делать. Мы используя временное хранилище, мы на одной форме поместили в это временное хранилище, передали адрес в нашу форму владелица, с которой мы вызвали. На этой форме обработали все это дело и дальше эту форму закрыли. Почему мы не могли передать просто табличную часть? Табличная часть это объект, которого в клиентском контексте вообще нет. У вас есть элементы формы,","usage":{"type":"duration","seconds":60}}

=== Часть 26 ===
{"text":" которые могут отображать эту табличную часть в клиентском контексте. А вот самой табличной части нет. И если вы пытаетесь передать этот объект в клиентский контекст, то вы получите сообщение... Так, что там... так Продолжение следует.","usage":{"type":"duration","seconds":60}}

=== Часть 27 ===
{"text":" И поэтому мы получим, если мы попытаемся такой сложный объект передать между контекстами, мы, скорее всего, получим какое-нибудь сообщение, попытка передать мутабельное значение. И мутабельное значение на файл. Так. Теперь давайте попробуем, как работает... У нас есть форма товара. А мы хотим чтобы у нас еще появилось отображение этого товара. Сейчас оно как выглядит. Просто товары. Ну и соответственно просто формочка. А мы хотим чтобы здесь еще была картинка. Давайте попробуем добавить картинку сюда. Для этого нам нужно сначала где-то хранить эту картинку. Мы можем...","usage":{"type":"duration","seconds":60}}

=== Часть 28 ===
{"text":" добавить реквизит пусть будет картинка данные и это у нас будет хранилище значений В целом, если мы... У нас формы нет, элементы справочника, которые нам придется добавить. Но система не понимает, что нам делать с хранилищем. Система не понимает, что нам делать с хранилищем. картинки","usage":{"type":"duration","seconds":60}}

=== Часть 29 ===
{"text":" Это же какой-то блок, который система не знает, как обработать. И в целом у нас хранилище значения просто отсутствует на данных формах. Мы с ним ничего сделать не сможем. Поэтому нам нужно добавить новый реквизит формы. И здесь у нас будет адрес картинки. Адрес картинки это у нас будет строка. Мы также добавим это все на форму. Но только у нас это будет не поле ввода, а поле картинки. И нам, наверное, заголовок не нужен. Так. И теперь нам нужно, чтобы пользователь каким-то образом загрузил нам картинку. Мы добавим Командую.","usage":{"type":"duration","seconds":60}}

=== Часть 30 ===
{"text":" Загрузить картинку. Ну и пусть это будет на клиенте. На клиенте. Так. у нас еще есть такая штука как асинхронные вызовы поэтому мы сделаем это не просто на клиенте но мы еще выберем сделаем это чтобы это у нас была синхронная функция. Я не помню с какой платформой это начинает работать у нас с вами по моему режим совместимости не используется поэтому у нас ну вот так","usage":{"type":"duration","seconds":60}}

=== Часть 31 ===
{"text":" синтаксис доступен чуть чуть похож на кстати у пайта но вот эти асинхронные вызовы сделаны и как мы здесь будем нам нужно получить обещание ждать и нам нужно поместить файл и так сейчас вспомню как называется поместить до поместить файл на серфе асинхронно так ну и собственно нам важно на самом деле и Нам важно.","usage":{"type":"duration","seconds":60}}

=== Часть 32 ===
{"text":" уникальный идентификатор формы то есть это сюда ну и также мы в уникальный идентификатор сюда подставил так давайте посмотрим что на ваще может вернуть это нашим что за обещание то есть он может вернуть У нас просто пользователь может просто закрыть эту форму и ничего не сделать. Соответственно, если отменено, то он будет неопределено. То есть в обещание нам придет неопределено. А если файл был выбран, то мы к нему обратимся и получим адрес файла. Для этого нам надо... Что сделать?","usage":{"type":"duration","seconds":60}}

=== Часть 33 ===
{"text":" Если... Так, ну давайте сделаем, чтобы у нас единый вызов был. Поэтому мы... Точнее, чтобы у нас не было выхода из середины. Поэтому мы так сделаем. Обещание... не определено. И тогда мы дальше будем работать. Если у нас прервалось, мы просто вывалимся за процедуру. И здесь нам нужно сделать следующее. У нас появился адрес картинки. Это у нас обещание. И у нас там, по-моему, адрес файла.","usage":{"type":"duration","seconds":60}}

=== Часть 34 ===
{"text":" поместить мы получим тип ссылка на файл и демо ссылка на файл нет Так, сейчас. Так, ну, в целом, можно попробовать... Так, параметры, описание, оповещение. Так, сейчас. Так, где у нас возврат? А, вот. Так. и","usage":{"type":"duration","seconds":60}}

=== Часть 35 ===
{"text":" У нас есть адрес. Вот этот адрес нам и нужен. Так, что мы... Давайте проверим, как это работает. Кнопку я не вынес. как обычно. Так. Загрузить картинку. Давайте, чтобы она много места не занимала, тоже картинку сделаем. Стандартную. Тут есть что-то типа картинки. Вот. Так. И загрузим.","usage":{"type":"duration","seconds":60}}

=== Часть 36 ===
{"text":" изображение. Давайте вот это загрузим. Так. Что у нас происходит? Отлично, картинка прогрузилась. Так, ну мы видим на самом деле, мы кнопку нажали, у нас там появилась эта картинка, но на самом деле мы сейчас даже если запишем, то у нас ничего не произойдет. У нас как бы чуда не случилось, мы никуда эту картинку не поместили. Теперь нам надо эту картинку собственно поместить к нам в хранилище. Ну вот в тот реквизит, который мы создали. И соответственно читать его при... И читать его, когда мы... Пока!","usage":{"type":"duration","seconds":60}}

=== Часть 37 ===
{"text":" когда мы создаем этот объект на сервере так для этого мы с вами что должны сделать так у нас есть форма давайте по первых поместим наш к то есть надо это сделать так чтобы у нас адрес картинки мы с вами поместили но при этом у нас давайте сейчас еще раз покажу что мы хотим сделать смотрите если мы поменяем цену например Продолжение следует...","usage":{"type":"duration","seconds":60}}

=== Часть 38 ===
{"text":" то у нас появляется вот этот модификатор, то есть звездочка, который говорит о том, что объект был модифицирован и у нас платформа знает, что даже если мы пытаемся закрыть, он предложит нам внести изменения. А вот если мы выберем нашу картинку, то у нас никакой модифицированности здесь не появится. то есть у нас картинка появилась но она прогрузилась но при этом у нас система даже не предупредит о том что неплохо бы сохранить поэтому нам нужно в системе как то маякнуть о том что мы хотим чтобы мы хотим сделать так чтобы у нас Продолжение следует.","usage":{"type":"duration","seconds":60}}

=== Часть 39 ===
{"text":" флаг модифицированности скинулся. Точнее, наоборот, поднялся. Истина. Таким образом, при пользователе, когда будет закрывать форму, у него появится сообщение о том, что неплохо бы записать все. Так. И теперь нам надо записать наши изменения. Чтобы записать у нас есть вот несколько есть перед записью перед записью на сервере и при записи на сервере перед записью а она вызывается еще на клиенте мы можем убедиться то есть она вызывается на клиента и нам пока и ну то есть нам не нужно такое поведение при записи это вот как раз тогда когда объект","usage":{"type":"duration","seconds":60}}

=== Часть 40 ===
{"text":" перед записью, когда мы проинициализируем структуру, которую мы запишем. А вот при записи на сервере у нас уже объект записан, поэтому уже поздновато. А второй раз туда записывать не очень оптимальный способ. Поэтому нам нужно перед записью на сервере сначала убедиться, что у нас в адресе картинки что-то есть. А для того, чтобы убедиться, нам нужно понять, что это именно адрес временного хранилища. Для этого есть функция глобального контекста. Это адрес временного хранилища. И если это адрес временного хранилища, то в текущий объект","usage":{"type":"duration","seconds":60}}

=== Часть 41 ===
{"text":" текущий объект в данной картинке мы запишем новый хранилище значений получим получим временного хранилища адреска по точнее по адресу мы получим блок этот к нам в передадим упакуемого в хранилище так адрес картинки Продолжение следует.","usage":{"type":"duration","seconds":60}}

=== Часть 42 ===
{"text":" нет так это мы с вами записали а теперь то что мы с вами записали на самом деле при открытии у нас этот адрес не ниоткуда не появится то есть он будет пустой поэтому нам надо еще одну а проинициализировать этот адрес нам нужно из при создании на сервере так и здесь мы делаем следующее наш адрес картинки будет равен здесь мы получим навигационную ссылку получить навигационную ссылку из","usage":{"type":"duration","seconds":60}}

=== Часть 43 ===
{"text":" нашего объекта и, собственно, данные картинки. Вот куда мы с вами запихивали это все. так ну а теперь давайте посмотрим, что не так где-то я что-то накосячил получил негационную так, а вот здесь я забыл так, проверим сейчас все норм так Спасибо.","usage":{"type":"duration","seconds":60}}

=== Часть 44 ===
{"text":" И проверим, как это у нас теперь работает. Товары... так вот он нам говорит о том что нужно сохраниться и теперь мы когда заходим у нас картинка цивилизируется сюда тоже добавим картинку Продолжение следует...","usage":{"type":"duration","seconds":60}}

=== Часть 45 ===
{"text":" На самом деле, вот такое обращение к асинхронным... Мы немножко и по-другому можем, на самом деле, организовать... Ну и часто вы встретите в типовых конфигурациях вот эти асинхронные вызовы организации немного по-другому. Дело в том, что вот этот синтаксис, он не так давно появился. То есть тогда мы работаем с обещанием. У нас, на самом деле, когда... Давайте еще немножко... Кстати, вот в Python, по-моему, ровно так же работает. Ассинг там функция, и в ней мы делаем wait, по-моему, и ждать, и, соответственно, дальше уже работаем","usage":{"type":"duration","seconds":60}}

=== Часть 46 ===
{"text":" тем что к нам вернулась то есть если мы вот мы решили переопределить картинку мы решили то есть на самом деле у нас вот эта форма она не модельная то есть мы дальше можем работать с нашей программой Вот. И, соответственно, там... Эта форма, она как раз немодельная. Так. Другой способ. вот","usage":{"type":"duration","seconds":60}}

=== Часть 47 ===
{"text":" асинхронные мы можем на самом деле организовать через оповещение. И у нас вот на самом деле вот такая небольшая конструкция у нас там выведется сразу в несколько еще в несколько процедур. То есть мы тоже по сути сделаем то же самое практически, только у нас Но кода будет гораздо больше. С хранилищем данных, с временным хранилищем это все, что я хотел сегодня рассказать. Давайте немножко теперь про ваши работы. У вас какие успехи?","usage":{"type":"duration","seconds":57}}

